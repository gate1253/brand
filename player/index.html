<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Webpack App</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <script defer src="malgnPlayer.js?ttl=1"></script>
    <script>
      let _player;
      window.onload = function () {
        malgnPlayer.setup({
          targetID: "player",
          video: {
            primaryKey: "33333",
            title: "test",
            thumbnail: "https://timgs.acs.wecandeo.com/thumb/513/20150724/17/2257_6c4bd_00000.jpg?udate=2025053002?udate=20220406",
            // 단일 파일 설정 ( HLS & MPD 는 파일내 화질 정보를 사용합니다. )
            source: "https://api.wecandeo.com/video/default/BOKNS9AQWrG3T1ii8jW3SOJHk4DFRfnICIii8SOulPCMvomANL8sPkaIMOwkBTzaHclvYrRQhTSld1kWPMNtvis8Aieie.mp4"
            // 화질 정보 설정 ( ex: mp4 )
            // sources: [
            //   {
            //     isDefault: "false",
            //     format: "mp4",
            //     label: "360p",
            //     url: "https://api.wecandeo.com/video/default/BOKNS9AQWrG3T1ii8jW3SOJHk4DFRfnICIii8SOulPCMvomANL8sPkaIMOwkBTzaHc3dpWLpisOU7MdNiiCI2AEipGwieie.mp4"
            //   },
            //   {
            //     isDefault: "false",
            //     format: "mp4",
            //     label: "540p",
            //     url: "https://api.wecandeo.com/video/default/BOKNS9AQWrG3T1ii8jW3SOJHk4DFRfnICIii8SOulPCMvomANL8sPkaIMOwkBTzaHclvYrRQhTSld1kWPMNtvis8Aieie.mp4"
            //   }
            // ],
            // 자막 설정
            // caption: [
            //   {
            //     code: "ko",
            //     label: "한국어",
            //     url: "https://service.domain.com/subtitle/20240919/V2356_d5187318-5745-4aa8-a853-ee9c1d6e89c2.smi",
            //     format: "SMI"
            //   },
            //   {
            //     code: "en",
            //     label: "English",
            //     url: "https://service.domain.com/subtitle/20240913/V2356_62c2830e-2bd7-4f68-8c21-3234661700a1.vtt",
            //     format: "VTT"
            //   }
            // ]
          }
        });

        _player = malgnPlayer.getPlayer(0);

        _player.onEvent(malgnPlayerEvent.PLAY, function () {
          console.log("							index play");
          //_player.setPosition(30);
        });

        _player.onEvent(malgnPlayerEvent.PAUSE, function () {
          console.log("							index pause");

          _player.offEvent(malgnPlayerEvent.PLAY);
        });

        _player.onEvent(malgnPlayerEvent.COMPLETE, function () {
          console.log("							index complete");
        });

        _player.onEvent(malgnPlayerEvent.SEEK, function (value) {
          console.log("							index seek", value);
        });

        _player.onEvent(malgnPlayerEvent.VOLUME, function (value) {
          console.log("							index VOLUME", value);
        });

        _player.onEvent(malgnPlayerEvent.BUFFERING, function (data) {
          console.log("							index buffer", data);
        });

        _player.onEvent(malgnPlayerEvent.IDLE, function (data) {
          console.log("							index idle");
        });

        _player.onEvent(malgnPlayerEvent.ERROR, function (data) {
          console.log("							index error", data.message);
        });

        _player.onEvent(malgnPlayerEvent.SEEKED, function (data) {
          console.log("							index seeked");
        });

        _player.onEvent(malgnPlayerEvent.TIME, function (data) {
          // console.log("							index time", data.position, data.duration);
        });

        _player.onEvent(malgnPlayerEvent.FULLSCREEN, function (data) {
          console.log("							index fullscreen", data);
        });

        _player.onEvent(malgnPlayerEvent.PLAYBACK_RATE, function (data) {
          console.log("							index playbackRate", data);
        });

        _player.onEvent(malgnPlayerEvent.RESIZE, function (data) {
          console.log("							index resize", data.width, data.height);
        });

        _player.onEvent(malgnPlayerEvent.QUALITY_CHANGE, function (data) {
          console.log("							index qualityChange", data);
        });

        _player.onEvent(malgnPlayerEvent.QUALITY, function (data) {
          console.log("							index quality", data);
        });

        _player.onEvent(malgnPlayerEvent.CAPTION, function (data) {
          console.log("							index caption", data);
        });

        _player.onEvent(malgnPlayerEvent.CAPTION_CHANGE, function (data) {
          console.log("							index captionChange", data);
        });
      };

      function getElement(id) {
        return document.getElementById(id);
      }

      function setPosition(e) {
        getElement("position").value = e.innerHTML;
      }

      function setPlaybackRate(e) {
        _player.setPlaybackRate(getElement("playbackRate").value);
      }

      function seek() {
        _player.setPosition(getElement("seekInput").value);
      }

      function setCaption() {
        _player.setCaption(getElement("captionInput").value);
      }

      function setVolume() {
        _player.setVolume(getElement("volume").value);
      }

      function setMuted(e) {
        if (e.innerHTML == "muted") {
          e.innerHTML = "unmuted";
          _player.setMuted(true);
        } else {
          e.innerHTML = "muted";
          _player.setMuted(false);
        }
      }

      function getState() {
        console.log(_player.getState());
      }

      function getPosition() {
        console.log(_player.getPosition());
      }

      function getDuration() {
        console.log(_player.getDuration());
      }

      function getVolume() {
        console.log(_player.getVolume());
      }

      function getMuted() {
        console.log(_player.getMuted());
      }

      function getFullscreen() {
        console.log(_player.getFullscreen());
      }

      function getWidth() {
        console.log(_player.getWidth());
      }

      function getHeight() {
        console.log(_player.getHeight());
      }

      function fullscreen() {
        _player.setFullscreen(!_player.getFullscreen());
      }

      function seekEnable() {
        isSeekEnable = !isSeekEnable;

        const el = document.getElementById("stSeekEnable");
        el.innerHTML = `${isSeekEnable ? "true" : "false"}`;

        const selType = document.getElementById("seekEnableType").value;
        _player.seekEnable(isSeekEnable, selType);
      }

      function initSeekEnable() {
        isSeekEnable = true;

        const el = document.getElementById("stSeekEnable");
        el.innerHTML = `${isSeekEnable ? "true" : "false"}`;

        const selType = document.getElementById("seekEnableType").value;
        _player.seekEnable(isSeekEnable, selType);
      }
    </script>
  </head>
  <body style="background-color: white">
    <div id="player" style="width: 640px; height: 360px"></div>
    <button id="load" style="position: absolute; top: 420px; width: auto; height: 25px" onclick="_player.play()">play</button>
    <button id="load" style="position: absolute; top: 420px; left: 50px; width: auto; height: 25px" onclick="_player.pause()">pause</button>
    <button id="load" style="position: absolute; top: 420px; left: 110px; width: auto; height: 25px" onclick="_player.stop()">stop</button>
    <button id="load" style="position: absolute; top: 420px; left: 170px; width: auto; height: 25px" onclick="getState()">state</button>
    <button id="load" style="position: absolute; top: 420px; left: 230px; width: auto; height: 25px" onclick="getPosition()">getPosition</button>
    <button id="load" style="position: absolute; top: 420px; left: 330px; width: auto; height: 25px" onclick="getDuration()">getDuration</button>
    <button id="load" style="position: absolute; top: 450px; left: 0px; width: auto; height: 25px" onclick="getVolume()">getVolume</button>
    <button id="load" style="position: absolute; top: 450px; left: 90px; width: auto; height: 25px" onclick="getMuted()">getMuted</button>
    <button id="load" style="position: absolute; top: 450px; left: 170px; width: auto; height: 25px" onclick="getFullscreen()">getFullscreen</button>
    <button id="load" style="position: absolute; top: 450px; left: 270px; width: auto; height: 25px" onclick="getWidth()">getWidth</button>
    <button id="load" style="position: absolute; top: 450px; left: 350px; width: auto; height: 25px" onclick="getHeight()">getHeight</button>
    <button id="load" style="position: absolute; top: 450px; left: 430px; width: auto; height: 25px" onclick="fullscreen()">fullscreen</button>

    <button id="muted" style="position: absolute; top: 480px; left: 0px; width: 80px; height: 25px" onclick="setMuted(this)">muted</button>

    <span style="position: absolute; top: 480px; left: 90px; width: 70px; height: 25px">volume : </span>
    <input id="volume" style="position: absolute; top: 480px; left: 170px; width: 110px; height: 25px" />
    <button id="volumeSubmit" style="position: absolute; top: 480px; left: 300px; width: 70px; height: 25px" onclick="setVolume(this)">commit</button>

    <span style="position: absolute; top: 480px; left: 380px; width: 120px; height: 25px">playbackRate : </span>
    <input id="playbackRate" style="position: absolute; top: 480px; left: 490px; width: 50px; height: 25px" />
    <button id="playbackSubmit" style="position: absolute; top: 480px; left: 550px; width: 70px; height: 25px" onclick="setPlaybackRate(this)">commit</button>

    <span style="position: absolute; top: 520px; left: 0px; width: 120px; height: 25px">seek : </span>
    <input id="seekInput" style="position: absolute; top: 520px; left: 50px; width: 50px; height: 25px" />
    <button id="pseekSubmit" style="position: absolute; top: 520px; left: 120px; width: 70px; height: 25px" onclick="seek(this)">commit</button>

    <span style="position: absolute; top: 520px; left: 200px; width: 120px; height: 25px">caption : </span>
    <input id="captionInput" style="position: absolute; top: 520px; left: 260px; width: 50px; height: 25px" />
    <button id="pseekSubmit" style="position: absolute; top: 520px; left: 330px; width: 70px; height: 25px" onclick="setCaption(this)">commit</button>
  </body>
</html>
