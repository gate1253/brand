<!doctype html>
<html lang="ko">
<head>
	<meta charset="utf-8" />
	<meta name="viewport" content="width=device-width,initial-scale=1" />
	<title>RES302</title>
	<link rel="stylesheet" href="assets/style.css" />
</head>
<body>
	<!-- 추가: 우측 상단 고정 Support 링크 -->
	<a class="top-right-support" href="/support/" title="지원 페이지 열기" aria-label="지원 페이지">Support</a>
	<!-- 변경: 로그인/로그아웃 버튼을 위한 동적 컨테이너 -->
	<div id="auth-container"></div>

	<main class="container" role="main">
		<!-- 중앙 정렬된 로고 + 간단 설명 -->
		<div class="brand" role="banner">
			<img class="logo" src="assets/images/logo.png" alt="RES302">
			<p class="lead" style="margin-top:0">간단하고 빠른 단축 URL 생성 서비스</p>
		</div>

		<!-- 중앙 검색(단축) 박스 -->
		<section class="search-wrap" aria-labelledby="shorten-heading">
			<h2 id="shorten-heading" style="position:absolute;left:-9999px;top:auto;width:1px;height:1px;overflow:hidden;">단축 URL 생성</h2>
			<form class="search-box" onsubmit="event.preventDefault(); document.getElementById('shorten-btn').click();">
				<input id="url-input" type="url" placeholder="원본 URL을 입력하세요 (예: https://example.com/long/path)" aria-label="원본 URL" />
				<button id="shorten-btn" type="button">단축 생성</button>
			</form>
			<p class="note" style="text-align:center;margin:8px 0 0">비회원은 커스텀 코드를 제공할 수 없습니다. 커스텀 코드가 필요하면 회원으로 로그인하세요.</p>
			<div id="msg" class="status" role="status" aria-live="polite" style="text-align:center"></div>
		</section>
	</main>

	<script src="assets/app.js" defer></script>
	<script src="/member/auth.js" defer></script>
	<script>
		// 추가: 로그인 상태에 따라 UI를 동적으로 변경하는 스크립트
		document.addEventListener('DOMContentLoaded', () => {
			const authContainer = document.getElementById('auth-container');
			const user = window.getCurrentUser();

			if (user) {
				// 로그인된 경우: 로그아웃 버튼 표시
				authContainer.innerHTML = `<button id="logout-btn" class="auth-button" type="button">Logout</button>`;
				document.getElementById('logout-btn').addEventListener('click', () => {
					window.logout();
				});
			} else {
				// 로그아웃된 경우: 로그인 버튼 표시
				authContainer.innerHTML = `<a class="auth-button" href="/member/login.html">Login</a>`;
			}
		});
	</script>
 </body>
 </html>
